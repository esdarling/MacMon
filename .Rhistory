head(d2)
d3 <- d2  %>%
group_by(Biomass_bins, variable) %>%
summarise(mean.biomass = mean(value, na.rm = TRUE))
head(d2)
ggplot(aes(x = Management.Rule, y = value),
data = subset(d2, Biomass_bins == 10)) +
#geom_point() +
geom_boxplot(aes(colour = variable)) +
facet_wrap(~variable, scales = "free")
ggplot(aes(x = Area.Status, y = mean.value),
data = d) +
#geom_point() +
geom_boxplot() +
facet_wrap(~variable, scales = "free")
ggplot(aes(x = Area.Status, y = mean.value),
data = subset(d2, Biomass_bins == 10)) +
#geom_point() +
geom_boxplot() +
facet_wrap(~variable, scales = "free")
ggplot(aes(x = Area.Status, y = value),
data = subset(d2, Biomass_bins == 10)) +
#geom_point() +
geom_boxplot() +
facet_wrap(~variable, scales = "free")
unique(d2$Area.Status)
ggplot(aes(x = Area.Status, y = value),
data = subset(d2, Biomass_bins == 10)) +
#geom_point() +
geom_boxplot(aes(colour = variable)) +
facet_wrap(~variable, scales = "free")
unique(d2$Management.Rule)
ggplot(aes(x = Management.Rule, y = value),
data = subset(d2, Biomass_bins == 10)) +
#geom_point() +
geom_boxplot(aes(colour = variable)) +
facet_wrap(~variable, scales = "free")
ggplot(aes(x = Area.Status, y = value),
data = subset(d2, Biomass_bins == 10)) +
#geom_point() +
geom_boxplot(aes(colour = variable)) +
facet_wrap(~variable, scales = "free")
unique(d2$Management.Rule)
unique(d2$Management.Rule)
d2$Management.Rule2 <- recode(d2$Management.Rule,
"'gear restriction' = 'gear';
'open access' = 'open';
'no take zone' = 'no-take'")
unique(d2$Management.Rule2)
unique(d2$Management.Rule)
d2$Management.Rule2 <- recode(d2$Management.Rule,
"'gear restriction' = 'gear';
'open access' = 'open';
'no take zone' = 'no-take'")
unique(d2$Management.Rule2)
d2$Management.Rule2 <- factor(d2$Management.Rule2,
levels = c("open","gear", "no-take"))
ggplot(aes(x = Management.Rule2, y = value),
data = subset(d2, Biomass_bins == 10)) +
#geom_point() +
geom_boxplot(aes(colour = variable)) +
facet_wrap(~variable, scales = "free")
unique(d2$Area.Status)
unique(d2$Area.Status)
d2$Area.Status2 <- recode(d2$Area.Status,
"'community reserve' = 'community';
'government reserve' = 'govt';
'open access' = 'open'")
unique(d2$Area.Status2)
d2$Area.Status2 <- factor(d2$Area.Status2,
levels = c("open","community","govt"))
ggplot(aes(x = Area.Status2, y = value),
data = subset(d2, Biomass_bins == 10)) +
#geom_point() +
geom_boxplot(aes(colour = variable)) +
facet_wrap(~variable, scales = "free")
unique(d2$Management.Rule)
d2$Management.Rule2 <- recode(d2$Management.Rule,
"'gear restriction' = 'gear';
'open access' = 'open';
'no take zone' = 'no-take'")
unique(d2$Management.Rule2)
d2$Management.Rule2 <- factor(d2$Management.Rule2,
levels = c("open","gear", "no-take"))
ggplot(aes(x = Management.Rule2, y = value),
data = subset(d2, Biomass_bins == 10)) +
#geom_point() +
geom_boxplot(aes(colour = variable)) +
facet_wrap(~variable, scales = "free")
unique(d2$Management.Rule)
d2$Management.Rule2 <- recode(d2$Management.Rule,
"'gear restriction' = 'gear';
'open access' = 'open';
'no take zone' = 'no-take'")
?recode
#read in clean data at site level
setwd("/Users/emilydarling/Dropbox/4_WCS MacMon/Seascapes/Indonesia MacMon/Indo Biomass paper/for R")
d <- read.csv("DATA_Fish_Transect_All_2015_STP_v3_filled.csv",
header = TRUE, stringsAsFactors = FALSE, strip.white = TRUE)
head(d)
nrow(d)
dev.off()
par(mar = rep(1, 4))
hist(d$latitude)
hist(d$longitude)
unique(d$Region2)
nrow)d
nrow(d)
names(d)
write.csv(d[,c(1:8)], "Site names and GPS from biomass_28Jan2016.csv", row.names =FALSE)
#read in clean data at site level
setwd("/Users/emilydarling/Dropbox/4_WCS MacMon/Seascapes/Indonesia MacMon/Indo Biomass paper/for R")
d <- read.csv("DATA_Fish_Transect_All_2015_STP_v3_filled.csv",
header = TRUE, stringsAsFactors = FALSE, strip.white = TRUE)
head(d)
nrow(d)
dev.off()
par(mar = rep(1, 4))
hist(d$latitude)
hist(d$longitude)
unique(d$Region2)
#cut Biomass into discrete groups
names(d)
d$Biomass_bins <- as.numeric(cut2(d$Biomass, g=10))
head(d$Biomass_bins)
head(d)
names(d)
write.csv(d[,c(1:6,17,7:16)], "FishBiomass data w_bins.csv", row.names= FALSE)
d <- read.csv("DATA_Fish_Transect_All_2015_v5.csv",
header = TRUE, stringsAsFactors = FALSE, strip.white = TRUE)
head(d)
nrow(d)
dev.off()
par(mar = rep(1, 4))
hist(d$latitude)
hist(d$longitude)
unique(d$Region2)
unique(d$Area.Status)
setwd("/Users/emilydarling/Dropbox/4_WCS MacMon/Seascapes/Indonesia MacMon/Indo Biomass paper/for R")
d <- read.csv("DATA_Fish_Transect_All_2015_v5.csv",
header = TRUE, stringsAsFactors = FALSE, strip.white = TRUE)
head(d)
nrow(d)
unique(d$Area.Status)
unique(d$Management.Rule)
unique(d$Region2)
names(d)
head(d)
par(mar=rep(1, 4))
hist(d$Biomass)
qplot(d$Biomass)
min(d$Biomass, na.rm = TRUE); max(d$Biomass, na.rm = TRUE)
ggplot(aes(x=Biomass), data = d) +
geom_histogram(binwidth = 250) +
scale_x_continuous(limits = c(0, 32000), expand = c(0,0)) +
scale_y_continuous(limits = c(0,350), expand = c(0,0)) +
theme_bw()
#cut Biomass into discrete groups
names(d)
d$Biomass_bins <- as.numeric(cut2(d$Biomass, g=10))
head(d$Biomass_bins)
#plot of biomass in each bin
ggplot(aes(x = Biomass_bins, y = Biomass), data = d) +
geom_point(shape = 21, alpha = 0.2) +
scale_y_continuous(trans='log10') +
scale_x_discrete(breaks = seq(1,10,1), labels = seq(1,10,1)) +
theme_bw()
d %>%
group_by(Biomass_bins) %>%
summarize(mean_biom = mean(Biomass, na.rm = TRUE),
sd_biom = sd(Biomass, na.rm = TRUE),
min_biom = min(Biomass, na.rm = TRUE),
max_biom = max(Biomass, na.rm = TRUE))
d %>%
group_by(Biomass_bins)
head(d)
d %>%
select(Biomass_bins, Biomass) %>%
group_by(Biomass_bins) %>%
summarize(mean_biom = mean(Biomass, na.rm = TRUE),
sd_biom = sd(Biomass, na.rm = TRUE),
min_biom = min(Biomass, na.rm = TRUE),
max_biom = max(Biomass, na.rm = TRUE))
d %>%
select(Biomass_bins, Biomass) %>%
group_by(Biomass_bins) %>%
summarize(mean_biom = mean(Biomass, na.rm = TRUE),
sd_biom = sd(Biomass, na.rm = TRUE),
min_biom = min(Biomass, na.rm = TRUE),
max_biom = max(Biomass, na.rm = TRUE))
?sd
d %>%
select(Biomass_bins, Biomass) %>%
group_by(Biomass_bins) %>%
summarize(mean_biom = mean(Biomass, na.rm = TRUE))
library(ggplot2)
library(RColorBrewer)
library(gdata)
library(gtools)
library(RgoogleMaps)
library(ggmap)
library(plyr)
library(dplyr)
library(car)
library(reports)
library(tidyr)
library(reshape2)
library(Hmisc)
library(printr)
print("loaded from MacMon .Rprofile")
par(mar = rep(1, 4))
d %>%
select(Biomass_bins, Biomass) %>%
group_by(Biomass_bins) %>%
summarize(mean_biom = mean(Biomass, na.rm = TRUE)) ,
sd_biom = sd(Biomass, na.rm = TRUE),
min_biom = min(Biomass, na.rm = TRUE),
max_biom = max(Biomass, na.rm = TRUE))
d %>%
select(Biomass_bins, Biomass) %>%
group_by(Biomass_bins) %>%
summarize(mean_biom = mean(Biomass, na.rm = TRUE))
d %>%
select(Biomass_bins, Biomass)
d %>%
select(Biomass_bins, Biomass) %>%
group_by(Biomass_bins)
d %>%
select(Biomass_bins, Biomass) %>%
group_by(Biomass_bins) %>%
summarize(mean_biom = mean(Biomass))
d %>%
select(Biomass_bins, Biomass) %>%
group_by(Biomass_bins) %>%
summarise(mean_biom = mean(Biomass)), na.rm = TRUE))
detach("package:plyr", unload=TRUE)
#read in clean data at site level
setwd("/Users/emilydarling/Dropbox/4_WCS MacMon/Seascapes/Indonesia MacMon/Indo Biomass paper/for R")
d <- read.csv("DATA_Fish_Transect_All_2015_v5.csv",
header = TRUE, stringsAsFactors = FALSE, strip.white = TRUE)
head(d)
nrow(d)
unique(d$Region2)
unique(d$Management.Rule)
unique(d$Area.Status)
nrow(d)
names(d)
#cut Biomass into discrete groups
names(d)
d$Biomass_bins <- as.numeric(cut2(d$Biomass, g=10))
head(d$Biomass_bins)
d(d$Biomass_bins)
#plot of biomass in each bin
ggplot(aes(x = Biomass_bins, y = Biomass), data = d) +
geom_point(shape = 21, alpha = 0.2) +
scale_y_continuous(trans='log10') +
scale_x_discrete(breaks = seq(1,10,1), labels = seq(1,10,1)) +
theme_bw()
d %>%
select(Biomass_bins, Biomass) %>%
group_by(Biomass_bins) %>%
summarise(mean_biom = mean(Biomass))
d %>%
select(Biomass_bins, Biomass) %>%
group_by(Biomass_bins) %>%
summarise(mean_biom = mean(Biomass)), na.rm = TRUE),
sd_biom = sd(Biomass, na.rm = TRUE),
min_biom = min(Biomass, na.rm = TRUE),
max_biom = max(Biomass, na.rm = TRUE))
d %>%
select(Biomass_bins, Biomass) %>%
group_by(Biomass_bins) %>%
summarise(mean_biom = mean(Biomass), na.rm = TRUE),
sd_biom = sd(Biomass, na.rm = TRUE),
min_biom = min(Biomass, na.rm = TRUE),
max_biom = max(Biomass, na.rm = TRUE))
d %>%
select(Biomass_bins, Biomass) %>%
group_by(Biomass_bins) %>%
summarise(mean_biom = mean(Biomass, na.rm = TRUE),
sd_biom = sd(Biomass, na.rm = TRUE),
min_biom = min(Biomass, na.rm = TRUE),
max_biom = max(Biomass, na.rm = TRUE))
bin_summary <- d %>%
select(Biomass_bins, Biomass) %>%
group_by(Biomass_bins) %>%
summarise(mean_biom = mean(Biomass, na.rm = TRUE),
sd_biom = sd(Biomass, na.rm = TRUE),
min_biom = min(Biomass, na.rm = TRUE),
max_biom = max(Biomass, na.rm = TRUE))\
write.csv(bin_summary, "Biomass bin summary.csv", row.names = FALSE)
bin_summary <- d %>%
select(Biomass_bins, Biomass) %>%
group_by(Biomass_bins) %>%
summarise(mean_biom = mean(Biomass, na.rm = TRUE),
sd_biom = sd(Biomass, na.rm = TRUE),
min_biom = min(Biomass, na.rm = TRUE),
max_biom = max(Biomass, na.rm = TRUE))
write.csv(bin_summary, "Biomass bin summary.csv", row.names = FALSE)
names(d)
names(d)
names(d)
d2 <- melt(d, id.vars = c(1:9))
head(d2)
unique(d2$variable)
ggplot(aes(x = Biomass_bins, y = value), data = d2) +
geom_point(shape = 21, alpha = 0.2) +
facet_wrap(~ variable, scales = "free") +
#scale_y_log10() +
geom_smooth(method = "loess", na.rm = TRUE) +
scale_x_discrete(breaks = seq(1,10,1), labels = seq(1,10,1)) +
theme_bw()
head(d2)
#average trophic biomass across bins
head(d2)
d3 <- d2  %>%
group_by(Biomass_bins, variable) %>%
summarise(mean.biomass = mean(value, na.rm = TRUE))
head(d3)
head(d3)
ggplot(aes(x = Biomass_bins, y = mean.biomass),
data = subset(d3, variable != "Biomass")) +
geom_bar(aes(fill = variable), stat = "identity")
#Compare biomass in 1st and 10th bins...
bin1_10 <- subset(d, Biomass_bins == 1 | Biomass_bins == 10)
nrow(bin1_10)
p + geom_point(aes(x = longitude, y = latitude, colour = Biomass_bins),
size = 3, alpha = 0.8,
position = position_jitter(width = 0.5, height = 0.55),
data = bin1_10)
map <- get_map(location=c(lon = 116, lat = -6), zoom=4,
maptype="satellite", source="google", crop = FALSE)
p <- ggmap(map)
p
library("mapproj", lib.loc="~/Library/R/3.1/library")
detach("package:mapproj", unload=TRUE)
library(ggmap)
map <- get_map(location=c(lon = 116, lat = -6), zoom=4,
maptype="satellite", source="google", crop = FALSE)
p <- ggmap(map)
p
remove.packages("mapproj")
library(ggmap)
map <- get_map(location=c(lon = 116, lat = -6), zoom=4,
maptype="satellite", source="google", crop = FALSE)
p <- ggmap(map)
p
install.packages("ggmap")
install.packages("ggmap")
library(ggmap)
map <- get_map(location=c(lon = 116, lat = -6), zoom=4,
maptype="satellite", source="google", crop = FALSE)
p <- ggmap(map)
p
p + geom_point(aes(x = longitude, y = latitude, colour = Biomass_bins),
size = 3, alpha = 0.8,
position = position_jitter(width = 0.5, height = 0.55),
data = bin1_10)
p + geom_point(aes(x = longitude, y = latitude, colour = as.factor(Biomass_bins)),
size = 3, alpha = 0.8,
position = position_jitter(width = 0.5, height = 0.55),
data = bin1_10)
p + geom_point(aes(x = longitude, y = latitude, colour = as.factor(Biomass_bins)),
size = 3, alpha = 0.5,
position = position_jitter(width = 0.5, height = 0.55),
data = bin1_10)
p + geom_point(aes(x = longitude, y = latitude, colour = as.factor(Biomass_bins)),
size = 3, alpha = 0.5,
position = position_jitter(width = 0.5, height = 0.55),
data = bin1_10) +
scale_colour_manual("Biomass bin")
p + geom_point(aes(x = longitude, y = latitude, colour = as.factor(Biomass_bins)),
size = 3, alpha = 0.5,
position = position_jitter(width = 0.5, height = 0.55),
data = bin1_10) +
scale_colour("Biomass bin")
p + geom_point(aes(x = longitude, y = latitude, colour = as.factor(Biomass_bins)),
size = 3, alpha = 0.5,
position = position_jitter(width = 0.5, height = 0.55),
data = bin1_10) +
scale_colour_manual("Biomass bin", values = c("red","blue"))
p + geom_point(aes(x = longitude, y = latitude, colour = as.factor(Biomass_bins)),
size = 3, alpha = 0.5,
position = position_jitter(width = 0.5, height = 0.55),
data = bin1_10) +
scale_colour_manual("Biomass bin", values = c("red","white"))
p + geom_point(aes(x = longitude, y = latitude, fill = as.factor(Biomass_bins)),
size = 3, alpha = 0.5, shape = 21, colour = "black",
position = position_jitter(width = 0.5, height = 0.55),
data = bin1_10) +
scale_fill_manual("Biomass bin", values = c("red","white"))
head(bin1_10)
head(d2)
ggplot(aes(x = Management.Rule, y = value),
data = subset(d2, Biomass_bins == 1 & Biomass_bins == 10)) +
#geom_point() +
geom_boxplot(aes(colour = variable)) +
facet_wrap(~variable, scales = "free")
head(d2)
unique(d2$variable)
ggplot(aes(x = Management.Rule, y = value),
data = subset(d2, Biomass_bins == 1)) +
#geom_point() +
geom_boxplot(aes(colour = variable)) +
facet_wrap(~variable, scales = "free")
unique(d2$variable)
unique(d2$Management.Rule)
d2$Management.Rule <- factor(d2$Management.Rule,
levels = c("open access","gear restriction",
"no take zone", "remote"))
unique(d2$Management.Rule)
ggplot(aes(x = Management.Rule, y = value),
data = subset(d2, Biomass_bins == 1)) +
#geom_point() +
geom_boxplot(aes(colour = variable)) +
facet_wrap(~variable, scales = "free")
ggplot(aes(x = Management.Rule, y = value),
data = subset(d2, Biomass_bins == 1)) +
#geom_point() +
geom_boxplot(aes(colour = variable)) +
facet_wrap(~variable, scales = "free") +
theme_bw(base_size = 14)
ggplot(aes(x = Management.Rule, y = value),
data = subset(d2, Biomass_bins == 1)) +
#geom_point() +
geom_boxplot(aes(colour = variable)) +
facet_wrap(~variable, scales = "free") +
theme_bw(base_size = 14) +
theme(axis.text.x = element_text(angle = 45, hjust = 1))
unique(d2$variable)
d2$variable <- recode(d2$variable,
"'Benthic.invertivore.1' = 'Invertivore.1'")
ggplot(aes(x = Management.Rule, y = value),
data = subset(d2, Biomass_bins == 1)) +
#geom_point() +
geom_boxplot(aes(colour = variable)) +
facet_wrap(~variable, scales = "free") +
theme_bw(base_size = 14) +
theme(axis.text.x = element_text(angle = 45, hjust = 1))
library(car)
d2$variable <- recode(d2$variable,
"'Benthic.invertivore.1' = 'Invertivore.1'")
ggplot(aes(x = Management.Rule, y = value),
data = subset(d2, Biomass_bins == 1)) +
#geom_point() +
geom_boxplot(aes(colour = variable)) +
facet_wrap(~variable, scales = "free") +
theme_bw(base_size = 14) +
theme(axis.text.x = element_text(angle = 45, hjust = 1))
d2$variable <- recode(d2$variable,
"'Benthic.invertivore.1' = 'Invertivore.1';
'Coralivore.1' = 'Corallivore.1'")
ggplot(aes(x = Management.Rule, y = value),
data = subset(d2, Biomass_bins == 1)) +
#geom_point() +
geom_boxplot(aes(colour = variable)) +
facet_wrap(~variable, scales = "free") +
theme_bw(base_size = 14) +
theme(axis.text.x = element_text(angle = 45, hjust = 1))
ggplot(aes(x = Management.Rule, y = value),
data = subset(d2, Biomass_bins == 1)) +
#geom_point() +
geom_boxplot(aes(colour = variable)) +
facet_wrap(~variable, scales = "free") +
theme_bw(base_size = 14) +
theme(axis.text.x = element_text(angle = 45, hjust = 1)) +
ggtitle("Biomass bin 1, 57-223 kg/ha")
ggplot(aes(x = Management.Rule, y = value),
data = subset(d2, Biomass_bins == 1)) +
#geom_point() +
geom_boxplot(aes(colour = variable)) +
facet_wrap(~variable, scales = "free") +
theme_bw(base_size = 14) +
theme(axis.text.x = element_text(angle = 45, hjust = 1)) +
ggtitle("Biomass bin 1: <250 kg/ha")
ggplot(aes(x = Management.Rule, y = value),
data = subset(d2, Biomass_bins == 10)) +
#geom_point() +
geom_boxplot(aes(colour = variable)) +
facet_wrap(~variable, scales = "free") +
theme_bw(base_size = 14) +
theme(axis.text.x = element_text(angle = 45, hjust = 1)) +
ggtitle("Biomass bin 10: 1600 to 30,000+ kg/ha")
unique(d2$Area.Status)
d2$Area.Status <- factor(d2$Area.Status, levels  = c("open access", "community reserve",
"government reserve",
"remote"))
unique(d2$Area.Status)
ggplot(aes(x = Area.Status, y = value),
data = subset(d2, Biomass_bins == 1)) +
#geom_point() +
geom_boxplot(aes(colour = variable)) +
facet_wrap(~variable, scales = "free") +
theme_bw(base_size = 14) +
theme(axis.text.x = element_text(angle = 45, hjust = 1)) +
ggtitle("Biomass bin 1: <250 kg/ha")
ggplot(aes(x = Management.Rule, y = value),
data = subset(d2, Biomass_bins == 10)) +
#geom_point() +
geom_boxplot(aes(colour = variable)) +
facet_wrap(~variable, scales = "free") +
theme_bw(base_size = 14) +
theme(axis.text.x = element_text(angle = 45, hjust = 1)) +
ggtitle("Biomass bin 10: 1600 to 30,000+ kg/ha")
ggplot(aes(x = Area.Status, y = value),
data = subset(d2, Biomass_bins == 10)) +
#geom_point() +
geom_boxplot(aes(colour = variable)) +
facet_wrap(~variable, scales = "free") +
theme_bw(base_size = 14) +
theme(axis.text.x = element_text(angle = 45, hjust = 1)) +
ggtitle("Biomass bin 10: 1600 to 30,000+ kg/ha")
